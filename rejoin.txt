-- 🌸 Auto Rejoin Script (chỉ dành cho acc "ikkopolconloli")
local Players = game:GetService("Players")
local TeleportService = game:GetService("TeleportService")
local p = Players.LocalPlayer

-- ⚠️ Kiểm tra LocalPlayer
if not p then
	warn("[Rejoin] ❌ Không tìm thấy LocalPlayer.")
	return
end

-- ⚠️ Giới hạn cho đúng tài khoản
if p.Name ~= "ikkopolconloli" then
	warn("[Rejoin] 🚫 Bỏ qua — chỉ acc 'ikkopolconloli' mới được rejoin.")
	return
end

-- 🕒 Thời gian chờ (228 giây)
local REJOIN_DELAY = 228

print(string.format("[Rejoin] ⏳ Tài khoản '%s' sẽ tự động rejoin sau %d giây.", p.Name, REJOIN_DELAY))

task.spawn(function()
	task.wait(REJOIN_DELAY)

	print("[Rejoin] 🔁 Đang gửi yêu cầu rejoin lại server...")

	local success, err = pcall(function()
		local placeId = game.PlaceId
		local jobId = game.JobId

		-- Thêm chút delay để executor ổn định trước khi teleport
		task.wait(1)
		TeleportService:TeleportToPlaceInstance(placeId, jobId, p)
	end)

	if success then
		print(string.format("[Rejoin] ✅ Yêu cầu rejoin thành công cho '%s' tại %s", p.Name, os.date("%X")))
	else
		warn(string.format("[Rejoin] ⚠️ Lỗi khi rejoin: %s", err))
	end
end)
