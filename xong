-- üå∏ Control Panel (Acc1 + Acc2)
-- Acc1: suykbyuay ‚Üí auto b·∫≠t chu·ªôt
-- Acc2: lpoolalovolaca
-- C·∫£ 2: GUI c·ªë ƒë·ªãnh + c√≥ n√∫t X + b·∫≠t/t·∫Øt shield + reset player

local Players = game:GetService("Players")
local TeleportService = game:GetService("TeleportService")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

local player = Players.LocalPlayer or Players.PlayerAdded:Wait()

-- === CONFIG ===
local ACC1 = "pphiphieyqu"
local ACC2 = "ulucasko"

local COORDS_ACC1 = Vector3.new(18.37334884643555, 2.37274569272994995, -140.72775268554688)
local COORDS_ACC2 = Vector3.new(18.86713409423828, 2.37274569272994995, -114.86202239990234)
local NEW_TP_COORDS = Vector3.new(31.83, 3.63, -121.76)
-- =================

-- X√°c ƒë·ªãnh acc v√† to·∫° ƒë·ªô t∆∞∆°ng ·ª©ng
local currentCoords
local isAcc1 = false

if player.Name == ACC1 then
    currentCoords = COORDS_ACC1
    isAcc1 = true
elseif player.Name == ACC2 then
    currentCoords = COORDS_ACC2
else
    warn(("[‚ö†Ô∏è] T√†i kho·∫£n '%s' kh√¥ng ƒë∆∞·ª£c ph√©p ch·∫°y script n√†y."):format(player.Name))
    return
end

-- === K·∫øt n·ªëi remote shield ===
local remote

pcall(function()
    local bridge = ReplicatedStorage:FindFirstChild("BridgeNet2")
    if bridge then
        remote = bridge:FindFirstChild("dataRemoteEvent")
    end

    if not remote then
        for _, v in ipairs(ReplicatedStorage:GetDescendants()) do
            if v.Name == "dataRemoteEvent" then
                remote = v
                break
            end
        end
    end
end)

local function safeFireShield(state)
    if remote then
        pcall(function()
            local args = {
                [1] = {
                    [1] = state,
                    [2] = "\26"
                }
            }
            remote:FireServer(unpack(args))
            print("[AutoShield] üõ°Ô∏è ƒê√£ g·ª≠i y√™u c·∫ßu:", state and "B·∫¨T" or "T·∫ÆT")
        end)
    else
        if not safeFireShield._warned then
            safeFireShield._warned = true
            warn("[AutoShield] Kh√¥ng t√¨m th·∫•y dataRemoteEvent; kh√¥ng g·ª≠i ƒë∆∞·ª£c y√™u c·∫ßu.")
        end
    end
end

-- === X√≥a GUI c≈© ===
if game.CoreGui:FindFirstChild("ControlGui") then
    game.CoreGui.ControlGui:Destroy()
end

-- === GUI ===
local gui = Instance.new("ScreenGui")
gui.Name = "ControlGui"
gui.ResetOnSpawn = false
gui.Parent = game.CoreGui

local frame = Instance.new("Frame")
frame.Parent = gui
frame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
frame.BorderColor3 = Color3.fromRGB(255, 255, 255)
frame.Size = UDim2.new(0, 230, 0, 300)
frame.Position = UDim2.new(0.05, 0, 0.2, 0)
frame.Active = true
frame.Draggable = false

-- === Header ===
local header = Instance.new("Frame", frame)
header.Size = UDim2.new(1, 0, 0, 32)
header.BackgroundColor3 = Color3.fromRGB(45, 45, 45)

local title = Instance.new("TextLabel", header)
title.Size = UDim2.new(1, -32, 1, 0)
title.Position = UDim2.new(0, 0, 0, 0)
title.BackgroundTransparency = 1
title.TextColor3 = Color3.new(1, 1, 1)
title.Font = Enum.Font.GothamBold
title.TextSize = 16
title.TextXAlignment = Enum.TextXAlignment.Left
title.Text = isAcc1 and "üå∏ Delai Control (Acc1)" or "üå∏ Tatcuako Control (Acc2)"

-- === Close Button ===
local closeBtn = Instance.new("TextButton", header)
closeBtn.Size = UDim2.new(0, 30, 1, 0)
closeBtn.Position = UDim2.new(1, -30, 0, 0)
closeBtn.BackgroundColor3 = Color3.fromRGB(200, 50, 50)
closeBtn.TextColor3 = Color3.new(1, 1, 1)
closeBtn.Font = Enum.Font.GothamBold
closeBtn.TextSize = 18
closeBtn.Text = "X"

closeBtn.MouseButton1Click:Connect(function()
    gui:Destroy()
    print("[ControlPanel] ‚ùå GUI ƒë√£ b·ªã x√≥a.")
end)

-- === Utility Button Generator ===
local function makeButton(text, posY, color)
    local btn = Instance.new("TextButton", frame)
    btn.Size = UDim2.new(0.8, 0, 0, 34)
    btn.Position = UDim2.new(0.1, 0, posY, 0)
    btn.BackgroundColor3 = color or Color3.fromRGB(80, 80, 255)
    btn.TextColor3 = Color3.new(1, 1, 1)
    btn.Font = Enum.Font.GothamBold
    btn.TextSize = 14
    btn.Text = text
    btn.BorderColor3 = Color3.fromRGB(255, 255, 255)
    return btn
end

-- === Buttons ===
local tpBtn = makeButton("üöÄ Teleport", 0.15)
tpBtn.MouseButton1Click:Connect(function()
    local char = player.Character or player.CharacterAdded:Wait()
    local hrp = char:WaitForChild("HumanoidRootPart")
    hrp.CFrame = CFrame.new(currentCoords)
    print(("[ControlPanel] ‚úÖ %s ƒë√£ d·ªãch chuy·ªÉn ƒë·∫øn v·ªã tr√≠ ri√™ng."):format(player.Name))
end)

local mouseBtn = makeButton("üñ±Ô∏è B·∫≠t Chu·ªôt", 0.28)
mouseBtn.MouseButton1Click:Connect(function()
    pcall(function()
        UserInputService.MouseIconEnabled = true
        UserInputService.MouseBehavior = Enum.MouseBehavior.Default
    end)

    RunService.RenderStepped:Connect(function()
        pcall(function()
            UserInputService.MouseIconEnabled = true
            UserInputService.MouseBehavior = Enum.MouseBehavior.Default
        end)
    end)

    print("[ControlPanel] üñ±Ô∏è Chu·ªôt ƒë√£ b·∫≠t v√† gi·ªØ c·ªë ƒë·ªãnh.")
end)

local shieldOnBtn = makeButton("üõ°Ô∏è B·∫≠t Shield", 0.41, Color3.fromRGB(100, 255, 100))
shieldOnBtn.MouseButton1Click:Connect(function()
    safeFireShield(true)
end)

local shieldOffBtn = makeButton("üõ°Ô∏è T·∫Øt Shield", 0.52, Color3.fromRGB(255, 100, 100))
shieldOffBtn.MouseButton1Click:Connect(function()
    safeFireShield(false)
end)

local rejoinBtn = makeButton("üîÅ Rejoin Game", 0.63)
rejoinBtn.MouseButton1Click:Connect(function()
    print(("[ControlPanel] üîÅ %s ƒëang rejoin..."):format(player.Name))
    pcall(function()
        TeleportService:Teleport(game.PlaceId, player)
    end)
end)

local resetBtn = makeButton("üîÑ Reset Player", 0.74, Color3.fromRGB(255, 200, 100))
resetBtn.MouseButton1Click:Connect(function()
    local char = player.Character
    if char then
        local humanoid = char:FindFirstChildOfClass("Humanoid")
        if humanoid then
            humanoid.Health = 0
        else
            char:BreakJoints()
        end
    end
end)

local newTpBtn = makeButton("üåü TP New Pos", 0.85, Color3.fromRGB(255, 150, 50))
newTpBtn.MouseButton1Click:Connect(function()
    local char = player.Character or player.CharacterAdded:Wait()
    local hrp = char:WaitForChild("HumanoidRootPart")
    hrp.CFrame = CFrame.new(NEW_TP_COORDS)
    print("[ControlPanel] üåü ƒê√£ d·ªãch chuy·ªÉn ƒë·∫øn v·ªã tr√≠ m·ªõi.")
end)

-- === Auto b·∫≠t chu·ªôt ===
task.defer(function()
    task.wait(1)

    pcall(function()
        UserInputService.MouseIconEnabled = true
        UserInputService.MouseBehavior = Enum.MouseBehavior.Default
    end)

    RunService.RenderStepped:Connect(function()
        pcall(function()
            UserInputService.MouseIconEnabled = true
            UserInputService.MouseBehavior = Enum.MouseBehavior.Default
        end)
    end)

    print("[ControlPanel] üñ±Ô∏è Chu·ªôt ƒë√£ t·ª± ƒë·ªông b·∫≠t cho t·∫•t c·∫£ acc.")
end)

print(("[üå∏ ControlPanel] GUI ƒë√£ s·∫µn s√†ng cho t√†i kho·∫£n: %s"):format(player.Name))
